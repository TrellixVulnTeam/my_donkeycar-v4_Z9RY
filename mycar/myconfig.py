DATA_PATH = '/dev/shm/mycar/data'
DRIVE_LOOP_HZ = 30

GPIO_PIN_BCM_CYCLETIME = 27
GPIO_PIN_BCM_ESC_ON = 23
GPIO_PIN_BCM_TUBWRITER = 5

HAVE_AHRS = False
#HAVE_AHRS = True
HAVE_INA226 = False
#HAVE_INA226 = True

HAVE_REVCOUNT = False
#HAVE_REVCOUNT = True
if HAVE_REVCOUNT:
	REV_RPM_MAX = 15000

	PINION_GEAR = 27
	SPUR_GEAR = 64
	#SPUR_GEAR = 68
	BEVEL_GEAR = 15
	RING_GEAR = 39
	TYRE_DIAMETER = 65
	#TYRE_DIAMETER = 70 #rally block tyre
	GEAR_RATIO = (PINION_GEAR / SPUR_GEAR * BEVEL_GEAR / RING_GEAR)
	KMPH = (GEAR_RATIO * TYRE_DIAMETER * 3.141592 * 60 / 1000 / 1000)

PWM_CENTER = 1520
PWM_MIN    = PWM_CENTER-420 #1100
PWM_MAX    = PWM_CENTER+420 #1940

'''
DRIVE_TRAIN_TYPE = "PWM_STEERING_THROTTLE"
if DRIVE_TRAIN_TYPE == "PWM_STEERING_THROTTLE":
	PWM_STEERING_THROTTLE = {
		"PWM_STEERING_PIN": "PCA9685.1:40.1",
		"PWM_STEERING_SCALE": 1.0,
		"PWM_STEERING_INVERTED": False,
		"PWM_THROTTLE_PIN": "PCA9685.1:40.0",
		"PWM_THROTTLE_SCALE": 1.0,
		"PWM_THROTTLE_INVERTED": False,
		"STEERING_LEFT_PWM":    PWM_MIN   /(1000000/4096/(1000/16)),
		"STEERING_RIGHT_PWM":   PWM_MAX   /(1000000/4096/(1000/16)),
		"THROTTLE_FORWARD_PWM": PWM_MAX   /(1000000/4096/(1000/16)),
		"THROTTLE_STOPPED_PWM": PWM_CENTER/(1000000/4096/(1000/16)),
		"THROTTLE_REVERSE_PWM": PWM_MIN   /(1000000/4096/(1000/16)),
	}
'''
DRIVE_TRAIN_TYPE = "PIGPIO_PWM"
if DRIVE_TRAIN_TYPE == "PIGPIO_PWM":
	STEERING_PWM_PIN = 12
	STEERING_PWM_FREQ = 100
	STEERING_PWM_INVERTED = False
	THROTTLE_PWM_PIN = 13
	THROTTLE_PWM_FREQ = 100
	THROTTLE_PWM_INVERTED = False
	STEERING_LEFT_PWM = PWM_MIN
	STEERING_RIGHT_PWM = PWM_MAX
	THROTTLE_FORWARD_PWM = PWM_MAX
	THROTTLE_STOPPED_PWM = PWM_CENTER
	THROTTLE_REVERSE_PWM = PWM_MIN
#'''

AUTO_RECORD_ON_THROTTLE = False

'''
CONTROLLER_TYPE = 'HID16CH'
if CONTROLLER_TYPE == 'HID16CH':
	SBUS_DEVICE = '/dev/hidPsoc'
	SBUS_CH1_CENTER = 1027
	SBUS_CH1_MIN = 304
	SBUS_CH1_MAX = 1744
	SBUS_CH2_CENTER = 1024
	SBUS_CH2_MIN = 1744
	SBUS_CH2_MAX = 304
	SBUS_CHX_CENTER = 0x400
	SBUS_CHX_MIN = 304
	SBUS_CHX_MAX = 1744
	SBUS_CH6_CENTER = 0x80
	SBUS_CH7_CENTER = 0x80
	CONTROLLER_ANGLE_NR = 1
	CONTROLLER_THROTTLE_NR = -1
'''
CONTROLLER_TYPE = 'pigpio_rc'
if CONTROLLER_TYPE == 'pigpio_rc':
	STEERING_RC_GPIO = 26
	THROTTLE_RC_GPIO = 20
	DATA_WIPER_RC_GPIO = 19
	PIGPIO_STEERING_MID = PWM_CENTER
	PIGPIO_MAX_FORWARD =  PWM_MAX
	PIGPIO_STOPPED_PWM =  PWM_CENTER
	PIGPIO_MAX_REVERSE =  PWM_MIN
	PIGPIO_SHOW_STEERING_VALUE = False
	PIGPIO_INVERT = False
	PIGPIO_JITTER = 0.025
	CONTROLLER_ANGLE_NR = 1
	CONTROLLER_THROTTLE_NR = 1

	PIN_KEYA = 23 #pin16
	PIN_KEYB = 24 #pin18
	PIN_KEYC = 25 #pin22
#'''

HAVE_LIDAR = False
#HAVE_LIDAR = True
if HAVE_LIDAR:
	LIDAR_PWM_PIN = 19
	LIDAR_PWM_FREQ = 100
	LIDAR_LEFT_PWM = 1000
	LIDAR_RIGHT_PWM = 2000

#USE_SSD1306_128_32 = False
USE_SSD1306_128_32 = True
if USE_SSD1306_128_32 == True:
	SSD1306_128_32_I2C_ROTATION = 0
	SSD1306_RESOLUTION = 2

RECORD_DURING_AI = True
